<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reset Password | NORDX</title>
</head>
<body>

<h2>Reset Password</h2>

<form id="resetForm">
  <input type="password" id="password" required placeholder="New password">
  <input type="password" id="confirm_password" required placeholder="Confirm password">
  <button type="submit">Reset Password</button>
</form>

<script>
const API_BASE = "https://beta.nordx.co.za";
const token = new URLSearchParams(window.location.search).get("token");

if (!token) {
  alert("Invalid reset link");
}

document.getElementById("resetForm").addEventListener("submit", async e => {
  e.preventDefault();

  const res = await fetch(`${API_BASE}/auth/reset-password`, {
    method: "POST",
    body: new URLSearchParams({
      token,
      password: password.value,
      confirm_password: confirm_password.value
    })
  });

  if (!res.ok) {
    alert("Reset failed. Link may be expired.");
    return;
  }

  alert("Password reset successful. Please log in.");
  window.location.href = "/Beta/login.html";
});
</script>

</body>
</html>
